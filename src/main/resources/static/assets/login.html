<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title> - 登录</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="${ctx!}/assets/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="${ctx!}/assets/css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <link href="${ctx!}/assets/css/animate.css" rel="stylesheet">
    <link href="${ctx!}/assets/css/style.css?v=4.1.0" rel="stylesheet">
    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html" />
    <![endif]-->
    <script>if(window.top !== window.self){ window.top.location = window.location;}</script>
</head>

<body class="gray-bg">

    <div class="middle-box text-center loginscreen  animated fadeInDown">
        <div>
            <div>

                <h1 class="logo-name">h</h1>

            </div>
            <h3>欢迎登录</h3>

            <form class="m-t" method="post" role="form" action="${ctx!}/login" id="frm">
                <div class="form-group">
                    <input type="email" class="form-control" placeholder="用户名" required="">
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" placeholder="密码" required="">
                </div>
                <button type="submit" class="btn btn-primary block full-width m-b">登 录</button>


                <p class="text-muted text-center"> <a href="login.html#"><small>忘记密码了？</small></a> | <a href="register.html">注册一个新账号</a>
                </p>

            </form>
        </div>
    </div>

    <!-- 全局js -->
    <script src="${ctx!}/assets/js/jquery.min.js?v=2.1.4"></script>
    <script src="${ctx!}/assets/js/bootstrap.min.js?v=3.3.6"></script>

    <script type="text/javascript">
		
		$(document).ready(function() {
			// 在键盘按下并释放及提交后验证提交表单
			$("#frm").validate({
				rules : {
					name : {
						required : true,
						minlength : 5
					},
					password : {
						required : true,
						minlength : 6
					}

				},
				messages : {
					name : {
						required : "请输入用户码",
						minlength : "用户名必需由五个以上字符组成"
					},
					password : {
						required : "请输入密码",
						minlength : "密码长度不能小于6个字符"
					}
				},
				submitHandler : function(form) {
					console.log(form)
					$.ajax({
						type : "POST",
						dataType : "json",
						url : "${ctx!}/login",
						data : $(form).serialize(),
						success : function(data) {
							if (data.code == 0) {
								layer.msg(data.msg);
							} else {
								location = "${ctx}/showIndex";
							}
						}
					});
					//form.submit();
				}
			});
		});
		//首页注册
		function register() {
			layer.open({
				type : 2,
				title : "用户注册",
				area : [ '893px', '600px' ],
				shadeClose : true,
				shade : false,
				content : '${ctx!}/showRegister',
			});
		}
	</script>
    

</body>

</html>
